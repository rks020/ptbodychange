<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İletişim - FitFlow</title>
    <link rel="stylesheet" href="./styles.css?v=2">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Navbar -->
    <div
        style="position: fixed; top: 0; left: 0; width: 100%; height: 80px; background: rgba(5, 5, 8, 0.9); z-index: 999999; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; backdrop-filter: blur(15px);">
        <div
            style="width: 100%; max-width: 1200px; padding: 0 24px; display: flex; justify-content: space-between; align-items: center;">
            <a href="./index.html" style="text-decoration: none;">
                <div
                    style="font-size: 28px; font-weight: 800; letter-spacing: -1px; display: flex; align-items: center;">
                    <span style="color: #FFD700;">Fit</span><span style="color: #06B6D4;">Flow</span>
                </div>
            </a>
            <a href="./admin/" class="btn-login"
                style="display: inline-flex; align-items: center; justify-content: center; padding: 12px 32px; background: #FFD700; color: #000; text-decoration: none; border-radius: 50px; font-weight: 700; font-size: 15px; transition: transform 0.2s, box-shadow 0.2s;">
                GİRİŞ YAP
            </a>
        </div>
    </div>
    <div style="height: 80px;"></div>

    <header class="page-header">
        <div class="container">
            <h1 class="page-title">Bizimle İletişime Geçin</h1>
            <p class="section-subtitle">Sorularınız veya önerileriniz için buradayız</p>
        </div>
    </header>

    <section class="page-content">
        <div class="container">
            <div class="contact-grid">
                <!-- Info Column -->
                <div class="contact-info">
                    <h3 style="margin-bottom: 24px; color: white;">İletişim Bilgileri</h3>

                    <div style="margin-bottom: 24px;">
                        <span
                            style="display: block; color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 4px;">E-Posta</span>
                        <a href="mailto:info.fitflowtr@gmail.com"
                            style="color: var(--primary-yellow); text-decoration: none; font-weight: 600;">info.fitflowtr@gmail.com</a>
                    </div>


                </div>

                <!-- Form Column -->
                <form class="contact-form" id="contactForm">
                    <div class="form-group">
                        <label class="form-label">Adınız Soyadınız</label>
                        <input type="text" id="fullName" class="form-input" placeholder="Ad Soyad" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">E-Posta Adresiniz</label>
                        <input type="email" id="email" class="form-input" placeholder="ornek@email.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Mesajınız</label>
                        <textarea id="message" class="form-textarea" placeholder="Mesajınızı buraya yazın..."
                            required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" id="submitBtn"
                        style="width: 100%; justify-content: center;">Gönder</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Custom Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                    <path
                        d="M12 22C6.477 22 2 17.523 2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22ZM11.003 16L18.073 8.929L16.659 7.515L11.003 13.172L8.174 10.343L6.76 11.757L11.003 16Z"
                        fill="#FFD700" />
                </svg>
            </div>
            <h3>Mesajınız Alındı!</h3>
            <p>Bizimle iletişime geçtiğiniz için teşekkür ederiz. En kısa sürede size dönüş yapacağız.</p>
            <button class="btn btn-primary" onclick="closeModal()">Tamam</button>
        </div>
    </div>

    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Initialize Supabase
        const supabaseUrl = 'https://hrywsorgjitwedsnlbyp.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhyeXdzb3Jnaml0d2Vkc25sYnlwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ5NTgwNzIsImV4cCI6MjA1MDUzNDA3Mn0.qN8wPTgFudFWD98kX9BbEp_V_8TLZWLMVIlCPfWKnJk';
        const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

        const form = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            console.log('Form submitting...');

            // Disable button
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Gönderiliyor...';

            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;


            try {
                // 1. Save to Database
                // alert('Adım 1: Veritabanına kayıt deneniyor...'); 
                const { error: dbError } = await supabaseClient
                    .from('contact_messages')
                    .insert([
                        { full_name: fullName, email: email, message: message }
                    ]);

                if (dbError) {
                    console.error('DB Error:', dbError);
                    throw new Error('Veritabanı hatası: ' + dbError.message);
                }

                // alert('Adım 1 Başarılı! Adım 2: Mail gönderiliyor...');

                // 2. Send Email via Edge Function
                const { error: funcError } = await supabaseClient.functions.invoke('send-contact-email', {
                    body: { full_name: fullName, email: email, message: message }
                });

                if (funcError) {
                    console.error('Email sending failed:', funcError);
                    alert('Uyarı: Mesaj kaydedildi ancak mail gönderilemedi: ' + funcError.message);
                }

                // alert('İşlem Tamamlandı!');

                // Show success modal
                document.getElementById('successModal').classList.add('active');
                form.reset();

            } catch (error) {
                console.error(error);
                alert('Bir hata oluştu: ' + (error.message || error));
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Gönder';
            }
        });

        function closeModal() {
            document.getElementById('successModal').classList.remove('active');
        }
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <span class="logo-text">FitFlow</span>
                    </div>
                    <p>Modern fitness yönetim platformu</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Ürün</h4>
                        <a href="./index.html#features">Özellikler</a>
                        <a href="./pricing.html">Fiyatlandırma</a>
                        <a href="#">Güncellemeler</a>
                    </div>
                    <div class="footer-column">
                        <h4>Destek</h4>
                        <a href="./help.html">Yardım Merkezi</a>
                        <a href="./contact.html">İletişim</a>
                        <a href="./feedback.html">Geri Bildirim</a>
                    </div>
                    <div class="footer-column">
                        <h4>Yasal</h4>
                        <a href="./privacy.html">Gizlilik Politikası</a>
                        <a href="./terms.html">Kullanım Şartları</a>
                        <a href="./cookies.html">Çerezler</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 FitFlow. Tüm hakları saklıdır.</p>
            </div>
        </div>
    </footer>
</body>

</html>